{"name":"Leaflet-layer-overpass","tagline":"This is an simple way to bring OSM data as POI overlay on your leaflet Map","body":"Leaflet Layer OverPass\r\n=============================\r\n\r\n## What is it ?\r\nA [Leaflet](http://leafletjs.com/) Plugin to create a custom POI overlay - thanks to the [OSM](http://www.openstreetmap.org/)-Dataset and the [OverPass-API](http://overpass-api.de/)\r\n\r\ncheckout the [Demo](http://bastler.bplaced.net/osm/overpass_layer_demo/)\r\n\r\n## How to use it ?\r\n```javascript\r\nvar attr_osm = 'Map data &copy; <a href=\"http://openstreetmap.org/\">OpenStreetMap</a> contributors',\r\nattr_overpass = 'POI via <a href=\"http://www.overpass-api.de/\">Overpass API</a>';\r\nvar osm = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {opacity: 0.7, attribution: [attr_osm, attr_overpass].join(', ')});\r\n\r\nvar map = new L.Map('map').addLayer(osm).setView(new L.LatLng(52.265, 10.524), 14);\r\n\r\n//OverPassAPI overlay\r\nvar opl = new L.OverPassLayer({\r\n  query: \"http://overpass-api.de/api/interpreter?data=[out:json];node(BBOX)[amenity=post_box];out;\",\r\n}\r\n\r\nmap.addLayer(opl);\r\n```\r\nIn order to get an valid query the [Overpass-turbo IDE](http://overpass-turbo.eu/) might help.\r\n\r\n## What are the options ?\r\nYou can specify an options object as an argument of L.OverPassLayer.\r\n```javascript\r\noptions: {\r\n  query: \"http://overpass-api.de/api/interpreter?data=[out:json];node(BBOX)[amenity=post_box];out;\",\r\n  callback: function(data) {\r\n    for(i=0;i<data.elements.length;i++) {\r\n      e = data.elements[i];\r\n\r\n      if (e.id in this.instance._ids) return;\r\n      this.instance._ids[e.id] = true;\r\n      var pos = new L.LatLng(e.lat, e.lon);\r\n      var popup = this.instance._poiInfo(e.tags);\r\n      var color = e.tags.collection_times ? 'green':'red';\r\n      var circle = L.circle(pos, 50, {\r\n        color: color,\r\n        fillColor: '#fa3',\r\n        fillOpacity: 0.5\r\n      })\r\n      .bindPopup(popup);\r\n      this.instance.addLayer(circle);\r\n    }\r\n  },\r\n};\r\n```\r\n\r\n## Used by\r\n- [Gdzie](http://gdzie.bl.ee/#!7/51.495/20.995/)\r\n- [Postbox Map](http://bastler.bplaced.net/osm/postbox_map/)\r\n- [Sustainability Map](http://bastler.bplaced.net/osm/sustainability_map/)\r\n\r\n## Dependencies\r\n- JQuery (version 1.8.0 is working). JQuery does the AJAX requests and creats the popup content. (Might be replaceable by [Leaflet-Ajax](https://github.com/calvinmetcalf/leaflet-ajax))\r\n- Leaflet (tried with version 0.6.2)\r\n\r\n\r\n## Further Ideas\r\n- OverPass result to -> geoJSON to -> Leaflet Layer to support ways and areas as well (see also [PoiMap](https://github.com/simon04/POImap/blob/master/railway.html), [OverPassTurbo](https://github.com/tyrasd/overpass-ide/blob/gh-pages/js/overpass.js))\r\n- remove JQuery dependency\r\n- improve popup text. use links, format addresses and contact details (compare with [OpenLinkMap](http://www.openlinkmap.org/))\r\n- improve caching - allow to store data for some days in browser\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}